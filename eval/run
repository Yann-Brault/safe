#!/bin/bash

DS=

for i in "$@"
do
case $i in
  -ds|--dynamic-shortcut)
    DS=$i
  ;;
esac
done

echo "Clean..."
./clean

echo "Merging files..."
./merge $@

if [ $DS ]; then
  echo "Instrumenting..."
  ./instrument
fi

echo "Analyzing files..."
./analyze $@

if [ -f jalangi.result ]; then
  echo "Calculating diff..."
  node branch_compare.js $@
fi
